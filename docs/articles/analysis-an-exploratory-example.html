<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analysis: an exploratory example • analyzr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analysis: an exploratory example">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">analyzr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analysis-a-prediction-example.html">Analysis: a prediction example</a>
    </li>
    <li>
      <a href="../articles/analysis-an-exploratory-example.html">Analysis: an exploratory example</a>
    </li>
    <li>
      <a href="../articles/analysis-an-inference-example.html">Analysis: an inference example</a>
    </li>
    <li>
      <a href="../articles/basics-of-the-grammar-of-graphics.html">Basics of the Grammar of Graphics</a>
    </li>
    <li>
      <a href="../articles/data-the-tidy-and-the-untidy.html">Data: The Tidy and the Untidy</a>
    </li>
    <li>
      <a href="../articles/first-steps-in-wrangling-data.html">First Steps in Wrangling Data</a>
    </li>
    <li>
      <a href="../articles/getting-data-in-and-out-of-r.html">Getting data in and out of R</a>
    </li>
    <li>
      <a href="../articles/short_note_on_literate_programming.html">A Short Note on Literate Programming</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/WFU-TLC/analyzr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Analysis: an exploratory example</h1>
                        <h4 class="author">Jerid Francom</h4>
            
            <h4 class="date">2019-02-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/WFU-TLC/analyzr/blob/master/vignettes/analysis-an-exploratory-example.Rmd"><code>vignettes/analysis-an-exploratory-example.Rmd</code></a></small>
      <div class="hidden name"><code>analysis-an-exploratory-example.Rmd</code></div>

    </div>

    
    
<div id="exploring-word-frequency-distributions" class="section level1">
<h1 class="hasAnchor">
<a href="#exploring-word-frequency-distributions" class="anchor"></a>Exploring word frequency distributions</h1>
<p>A common task in text analysis is to explore the distribution of words (or terms) in a text collection. There are a number of ways in which a research can operationalize frequency which can change the results quite dramatically. In this case study, I will demonstrate the difference between two frequency measures: raw counts (n) and Term-weighted Inverse Document Frequency (tf-idf). I will use the later to explore the similarity between written genres (categories) in the Brown Corpus of Written American English.</p>
</div>
<div id="data" class="section level1">
<h1 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h1>
<p>Let’s access a curated version of this data through the <code>analyzr</code> package. First, install and load the package, and the main tidyverse tools.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"WFU-TLC/analyzr"</span>)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; ── Attaching packages ───────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; ✔ ggplot2 3.1.0     ✔ purrr   0.3.0</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; ✔ tibble  2.0.1     ✔ dplyr   0.7.8</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; ✔ tidyr   0.8.2     ✔ stringr 1.3.1</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; ✔ readr   1.3.1     ✔ forcats 0.3.0</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; Warning: package 'tibble' was built under R version 3.5.2</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; Warning: package 'purrr' was built under R version 3.5.2</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; ── Conflicts ──────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidytext)</a>
<a class="sourceLine" id="cb2-13" title="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(analyzr)</a></code></pre></div>
<p>Let’s take a look at the <code>brown_words</code> dataset.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">glimpse</span>(brown_words)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; Observations: 1,004,082</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; Variables: 4</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; $ doc_id   &lt;chr&gt; "ca01", "ca01", "ca01", "ca01", "ca01", "ca01", "ca01",…</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; $ category &lt;chr&gt; "news", "news", "news", "news", "news", "news", "news",…</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; $ word     &lt;chr&gt; "the", "fulton", "county", "grand", "jury", "said", "fr…</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; $ tag      &lt;chr&gt; "at", "np-tl", "nn-tl", "jj-tl", "nn-tl", "vbd", "nr", …</span></a></code></pre></div>
<p>To find out more about the data we can look at the data dictionary provided in the <code>analyzr</code> package with <code><a href="../reference/brown.html">?brown</a></code>.</p>
</div>
<div id="case-study" class="section level1">
<h1 class="hasAnchor">
<a href="#case-study" class="anchor"></a>Case study</h1>
<div id="prepare-the-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#prepare-the-variables" class="anchor"></a>Prepare the variables</h2>
<p>The first step will be to calculate the relevant frequency metrics. Each of our measures will be grouped by category to highlight the similarity and difference between each.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">brown_category_words &lt;-<span class="st"> </span><span class="co"># word counts by category</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span>brown_words <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(category, word) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">count</span>(<span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb4-6" title="6">  </a>
<a class="sourceLine" id="cb4-7" title="7">brown_total_words &lt;-<span class="st"> </span><span class="co"># calculate total words per category</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span>brown_category_words <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">  </span><span class="kw">group_by</span>(category) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(n))</a>
<a class="sourceLine" id="cb4-11" title="11"></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co"># Add `total` to `brown_category_words`</span></a>
<a class="sourceLine" id="cb4-13" title="13">brown_category_words &lt;-<span class="st"> </span><span class="kw">left_join</span>(brown_category_words, brown_total_words)</a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; Joining, by = "category"</span></a>
<a class="sourceLine" id="cb4-15" title="15"></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co"># Observe the natural skew of word frequency distributions</span></a>
<a class="sourceLine" id="cb4-17" title="17">brown_category_words <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(n<span class="op">/</span>total, <span class="dt">fill =</span> category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot.window">xlim</a></span>(<span class="ot">NA</span>, <span class="fl">.0009</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>category, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">scales =</span> <span class="st">"free_y"</span>)</a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">#&gt; Warning: Removed 1749 rows containing non-finite values (stat_bin).</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">#&gt; Warning: Removed 15 rows containing missing values (geom_bar).</span></a></code></pre></div>
<p><img src="analysis-an-exploratory-example_files/figure-html/calculate-frequency-brown-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># Observe the top 15 most frequent words in each category</span></a>
<a class="sourceLine" id="cb5-3" title="3">brown_category_words <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">arrange</span>(category, <span class="kw">desc</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(word, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rev">rev</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(word)))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(category) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">15</span>, n) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n, <span class="dt">fill =</span> category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"n"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">4</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>category, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">scales =</span> <span class="st">"free"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="analysis-an-exploratory-example_files/figure-html/calculate-frequency-brown-2.png" width="700"></p>
<p>As we can see the most frequent words, in terms of number of occurrences is very similar between the categories. This is very much expected as natural language tends to show a striking leftward skew in frequency counts with primarily grammatical words forming the majority of word tokens in any (sizable) corpus. To distinguish between the words the form the scaffolding of language (grammatical) and words of importance (content), we will use the Term-weighted Inverse Document Frequency (tf-idf). This measure takes into the account the overall distribution across documents within a category weighting those terms that occur in many documents within a category (such as those in the above raw frequency plot) lower. On the whole, this measure attempts to strikes a balance between common grammatical terms and content terms.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">brown_category_freq &lt;-<span class="st"> </span><span class="co"># calculate the tf-idf measure</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span>brown_category_words <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidytext/topics/bind_tf_idf">bind_tf_idf</a></span>(word, category, n) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw">arrange</span>(category, <span class="kw">desc</span>(tf_idf)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7">brown_category_freq <span class="co"># View</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt; # A tibble: 135,497 x 7</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt;    category  word         n total       tf   idf   tf_idf</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt;  1 adventure matsuo      35 58347 0.000600  2.71 0.00162 </span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">#&gt;  2 adventure jess        33 58347 0.000566  2.71 0.00153 </span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt;  3 adventure brannon     29 58347 0.000497  2.71 0.00135 </span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt;  4 adventure ramey       28 58347 0.000480  2.71 0.00130 </span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt;  5 adventure barton      25 58347 0.000428  2.71 0.00116 </span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">#&gt;  6 adventure tilghman    25 58347 0.000428  2.71 0.00116 </span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">#&gt;  7 adventure curt        31 58347 0.000531  2.01 0.00107 </span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">#&gt;  8 adventure greg        25 58347 0.000428  2.01 0.000863</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">#&gt;  9 adventure langford    18 58347 0.000308  2.71 0.000835</span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">#&gt; 10 adventure lalaurie    17 58347 0.000291  2.71 0.000789</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">#&gt; # … with 135,487 more rows</span></a>
<a class="sourceLine" id="cb6-22" title="22"></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co"># Plot the 15 most important terms (tf-idf) for each category</span></a>
<a class="sourceLine" id="cb6-24" title="24">brown_category_freq <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(tf_idf)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(word, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rev">rev</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(word)))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="st">  </span><span class="kw">group_by</span>(category) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">15</span>, tf_idf) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-29" title="29"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-30" title="30"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, tf_idf, <span class="dt">fill =</span> category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-31" title="31"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-32" title="32"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"tf-idf"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-33" title="33"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.y =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">4</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-34" title="34"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>category, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">scales =</span> <span class="st">"free"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-35" title="35"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="analysis-an-exploratory-example_files/figure-html/calculate-tf-idf-brown-1.png" width="700"></p>
</div>
<div id="analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#analysis" class="anchor"></a>Analysis</h2>
<div id="category-similarity" class="section level3">
<h3 class="hasAnchor">
<a href="#category-similarity" class="anchor"></a>Category similarity</h3>
<p>Now that we have a measure which helps us get at the content of the categories, let’s now find out which categories tend to be similar to each other in text content. We will want to find the pairwise corrlation between the word frequencies and categories. The <code>widyr</code> package provides a key function for this task <code><a href="https://www.rdocumentation.org/packages/widyr/topics/pairwise_cor">pairwise_cor()</a></code>. We will use the <code>tf_idf</code> score to focus in on the distribution of words from a importance-based perspective.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(widyr)</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3">brown_category_cor &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span>brown_category_freq <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/widyr/topics/pairwise_cor">pairwise_cor</a></span>(category, word, tf_idf)</a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7">brown_category_cor <span class="co"># View the cateogory-category correlation coefficients</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt; # A tibble: 210 x 3</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt;    item1          item2     correlation</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;           &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt;  1 belles_lettres adventure    -0.0225 </span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt;  2 editorial      adventure    -0.0236 </span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;  3 fiction        adventure     0.0431 </span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;  4 government     adventure    -0.0249 </span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt;  5 hobbies        adventure    -0.0124 </span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt;  6 humor          adventure    -0.00166</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#&gt;  7 learned        adventure    -0.0330 </span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co">#&gt;  8 lore           adventure    -0.00805</span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="co">#&gt;  9 mystery        adventure     0.0538 </span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="co">#&gt; 10 news           adventure    -0.0169 </span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="co">#&gt; # … with 200 more rows</span></a></code></pre></div>
<p>To appreciate the relationships between the categories, we will plot a network graph. This requires packages for visualizing networks <code>ggraph</code> and <code>igraph</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggraph)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(igraph)</a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; Attaching package: 'igraph'</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt; The following objects are masked from 'package:dplyr':</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt;     as_data_frame, groups, union</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; The following objects are masked from 'package:purrr':</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt;     compose, simplify</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt; The following object is masked from 'package:tidyr':</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt;     crossing</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt; The following object is masked from 'package:tibble':</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt;     as_data_frame</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="co">#&gt; The following objects are masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="co">#&gt;     decompose, spectrum</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="co">#&gt; The following object is masked from 'package:base':</span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co">#&gt;     union</span></a>
<a class="sourceLine" id="cb8-23" title="23"></a>
<a class="sourceLine" id="cb8-24" title="24"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1234</span>) <span class="co"># make the network graph reproducible</span></a>
<a class="sourceLine" id="cb8-25" title="25"></a>
<a class="sourceLine" id="cb8-26" title="26">brown_category_cor <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(correlation <span class="op">&gt;</span><span class="st"> </span><span class="fl">.05</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># set a minimal threshold on correlation</span></a>
<a class="sourceLine" id="cb8-28" title="28"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/igraph/topics/graph_from_data_frame">graph_from_data_frame</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-29" title="29"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/ggraph">ggraph</a></span>(<span class="dt">layout =</span> <span class="st">"fr"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-30" title="30"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geom_edge_link">geom_edge_link</a></span>(<span class="kw">aes</span>(<span class="dt">alpha =</span> correlation, <span class="dt">width =</span> correlation), <span class="dt">color =</span> <span class="st">"grey"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-31" title="31"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geom_node_point">geom_node_point</a></span>(<span class="dt">size =</span> <span class="dv">6</span>, <span class="dt">color =</span> <span class="st">"lightblue"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-32" title="32"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggraph/topics/geom_node_text">geom_node_text</a></span>(<span class="kw">aes</span>(<span class="dt">label =</span> name), <span class="dt">repel =</span> <span class="ot">TRUE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-33" title="33"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Brown Corpus category correlations"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-34" title="34"><span class="st">  </span><span class="kw">theme_void</span>()</a></code></pre></div>
<p><img src="analysis-an-exploratory-example_files/figure-html/visualize-document-cor-brown-1.png" width="700"></p>
<!-- - Topic modeling -->
<!-- - Term-Term Associations -->
<!-- - Word embeddings -->
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>From this exploratory approach, we can gather that there are three groupings that show some overlap in content. This finding could be harnessed to then decided whether or not to conflate some categories.</p>
<p>For more ideas in terms of text exploration see <span class="citation">Silge and Robinson (2017)</span></p>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Silge2017">
<p>Silge, Julia, and David Robinson. 2017. <em>Text mining with R: A tidy approach</em>. O’Reilly Media.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#exploring-word-frequency-distributions">Exploring word frequency distributions</a></li>
      <li><a href="#data">Data</a></li>
      <li>
<a href="#case-study">Case study</a><ul class="nav nav-pills nav-stacked">
<li><a href="#prepare-the-variables">Prepare the variables</a></li>
      <li><a href="#analysis">Analysis</a></li>
      <li><a href="#summary">Summary</a></li>
      </ul>
</li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jerid Francom.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
