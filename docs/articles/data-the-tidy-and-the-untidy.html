<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data: The Tidy and the Untidy • analyzr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data: The Tidy and the Untidy">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">analyzr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analysis-an-inference-example.html">Analysis: an inference example</a>
    </li>
    <li>
      <a href="../articles/basics-of-the-grammar-of-graphics.html">Basics of the Grammar of Graphics</a>
    </li>
    <li>
      <a href="../articles/data-the-tidy-and-the-untidy.html">Data: The Tidy and the Untidy</a>
    </li>
    <li>
      <a href="../articles/first-steps-in-wrangling-data.html">First Steps in Wrangling Data</a>
    </li>
    <li>
      <a href="../articles/getting-data-in-and-out-of-r.html">Getting data in and out of R</a>
    </li>
    <li>
      <a href="../articles/short_note_on_literate_programming.html">A Short Note on Literate Programming</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/WFU-TLC/analyzr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Data: The Tidy and the Untidy</h1>
                        <h4 class="author">Jerid Francom</h4>
            
            <h4 class="date">2019-02-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/WFU-TLC/analyzr/blob/master/vignettes/data-the-tidy-and-the-untidy.Rmd"><code>vignettes/data-the-tidy-and-the-untidy.Rmd</code></a></small>
      <div class="hidden name"><code>data-the-tidy-and-the-untidy.Rmd</code></div>

    </div>

    
    
<div id="goals" class="section level2">
<h2 class="hasAnchor">
<a href="#goals" class="anchor"></a>Goals</h2>
<p>In this vignette I will introduce the notion of ‘tidy’ data. I will provide an example dataset for both tidy format and ‘untidy’ format. The goal is to help you understand what it means for a dataset to be tidy, why this is a conducive format for data analysis, and some basic operations to convert untidy datasets into tidy datasets.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>Let’s attach the packages we will need for this vignette. If you do not have a package, use the RStudio interface, or the following command, to install it before continuing.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"rio"</span>) <span class="co"># install rio package</span></a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse) <span class="co"># core packages </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; ── Attaching packages ───────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; ✔ ggplot2 3.1.0     ✔ purrr   0.3.0</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; ✔ tibble  2.0.1     ✔ dplyr   0.7.8</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; ✔ tidyr   0.8.2     ✔ stringr 1.3.1</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; ✔ readr   1.3.1     ✔ forcats 0.3.0</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; Warning: package 'tibble' was built under R version 3.5.2</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; Warning: package 'purrr' was built under R version 3.5.2</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; ── Conflicts ──────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(rio) <span class="co"># import/export </span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(datasets) <span class="co"># a package of toy datasets</span></a></code></pre></div>
</div>
<div id="tidy-approach-to-data" class="section level2">
<h2 class="hasAnchor">
<a href="#tidy-approach-to-data" class="anchor"></a>Tidy approach to data</h2>
<p>The data frame is the fundamental data structure for organizing data for analysis in R. A data frame in essence is just a collection of vectors of the same length. Each of these vectors will be of a single type (i.e. character, factor, integer, logical, <em>etc.</em>) corresponding to the type of information contained in each vector.</p>
<p>But when we conduct research the relationships between the vectors in the data.frame matter. Each row should correspond to an <strong>observation</strong> and each column an <strong>attribute</strong> of each observation. This is what is known as a ‘tidy’ dataset.</p>
</div>
<div id="tidy-data" class="section level2">
<h2 class="hasAnchor">
<a href="#tidy-data" class="anchor"></a>Tidy data</h2>
<p>Let’s make use of some data that is made available by default in R. Specifically we’ll take a look at the <code>msleep</code> dataset, a dataset containing the sleep times and weights of various mammals. Let’s get a sense of what that data look like with <code>glimpse()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">glimpse</span>(msleep) <span class="co"># view the data</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; Observations: 83</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; Variables: 11</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; $ name         &lt;chr&gt; "Cheetah", "Owl monkey", "Mountain beaver", "Greate…</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; $ genus        &lt;chr&gt; "Acinonyx", "Aotus", "Aplodontia", "Blarina", "Bos"…</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; $ vore         &lt;chr&gt; "carni", "omni", "herbi", "omni", "herbi", "herbi",…</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; $ order        &lt;chr&gt; "Carnivora", "Primates", "Rodentia", "Soricomorpha"…</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; $ conservation &lt;chr&gt; "lc", NA, "nt", "lc", "domesticated", NA, "vu", NA,…</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; $ sleep_total  &lt;dbl&gt; 12.1, 17.0, 14.4, 14.9, 4.0, 14.4, 8.7, 7.0, 10.1, …</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; $ sleep_rem    &lt;dbl&gt; NA, 1.8, 2.4, 2.3, 0.7, 2.2, 1.4, NA, 2.9, NA, 0.6,…</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; $ sleep_cycle  &lt;dbl&gt; NA, NA, NA, 0.1333333, 0.6666667, 0.7666667, 0.3833…</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; $ awake        &lt;dbl&gt; 11.9, 7.0, 9.6, 9.1, 20.0, 9.6, 15.3, 17.0, 13.9, 2…</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt; $ brainwt      &lt;dbl&gt; NA, 0.01550, NA, 0.00029, 0.42300, NA, NA, NA, 0.07…</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; $ bodywt       &lt;dbl&gt; 50.000, 0.480, 1.350, 0.019, 600.000, 3.850, 20.490…</span></a></code></pre></div>
<p>We see that there are 83 observations and 11 variables. Each variable corresponds to an attribute of the specific animal. We see that there are 5 categorical variables and 6 continuous variables. It is also apparent that there is some missing data, which is represented with <code>NA</code> or <code>&lt;NA&gt;</code> values depending on the variable type (categorical or continuous). It is not uncommon to have missing values in various cells of a dataset, for now it is just worth noting how they are represented in the data.</p>
<p>We can also see the data in a more standard tabular format by typing the name of the dataset in the Console.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">msleep <span class="co"># tabular view of the data</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; # A tibble: 83 x 11</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt;    name  genus vore  order conservation sleep_total sleep_rem sleep_cycle</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;  1 Chee… Acin… carni Carn… lc                  12.1      NA        NA    </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt;  2 Owl … Aotus omni  Prim… &lt;NA&gt;                17         1.8      NA    </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt;  3 Moun… Aplo… herbi Rode… nt                  14.4       2.4      NA    </span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt;  4 Grea… Blar… omni  Sori… lc                  14.9       2.3       0.133</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt;  5 Cow   Bos   herbi Arti… domesticated         4         0.7       0.667</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt;  6 Thre… Brad… herbi Pilo… &lt;NA&gt;                14.4       2.2       0.767</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt;  7 Nort… Call… carni Carn… vu                   8.7       1.4       0.383</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt;  8 Vesp… Calo… &lt;NA&gt;  Rode… &lt;NA&gt;                 7        NA        NA    </span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt;  9 Dog   Canis carni Carn… domesticated        10.1       2.9       0.333</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 10 Roe … Capr… herbi Arti… lc                   3        NA        NA    </span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; # … with 73 more rows, and 3 more variables: awake &lt;dbl&gt;, brainwt &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; #   bodywt &lt;dbl&gt;</span></a></code></pre></div>
<p>Some of the variable names may not be altogether transparent, so let’s take a look at the data dictionary with <code>?msleep</code>. After running this command in the Console you will get a help page with a description of the dataset.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">?msleep <span class="co"># view the data dictionary in the Help pane</span></a></code></pre></div>
<p>Since each row is an observation and each column an attribute of the data we have a tidy dataset. And at this point we could start an exploration of the data by creating table or plot summaries of the data. For example, we might be interested in finding out the how many types of <code>vore</code> there are and how many of each type there are.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">msleep <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">count</span>(vore, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># count `vore` and sort ascending</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>() <span class="co"># only show the top 5 rows</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt;   vore        n</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt;   &lt;chr&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; 1 herbi      32</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt; 2 omni       20</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt; 3 carni      19</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt; 4 &lt;NA&gt;        7</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt; 5 insecti     5</span></a></code></pre></div>
<p>Herbivores are the most common and insectivores the least common. We can also do a cross-tabulation of <code>vore</code> and <code>order</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">msleep <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">count</span>(vore, order, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># count `vore` by `order` and sort</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>() <span class="co"># top 5 rows</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt;   vore  order              n</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt; 1 herbi Rodentia          16</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt; 2 carni Carnivora         12</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt; 3 omni  Primates          10</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt; 4 herbi Artiodactyla       5</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt; 5 carni Cetacea            3</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt; 6 herbi Perissodactyla     3</span></a></code></pre></div>
<p>This table summary might start to get a little unwieldy, so a graphical approach may be in order.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">msleep <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> order, <span class="dt">fill =</span> vore)) <span class="op">+</span><span class="st"> </span><span class="co"># map `order` to x, and `vore` as fill for the bars</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span><span class="st"> </span><span class="co"># visualize as a bar plot</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="co"># flip the x/y axes to better display `order` names</span></a></code></pre></div>
<p><img src="data-the-tidy-and-the-untidy_files/figure-html/msleep-plot-vore-order-1.png" width="700"></p>
<p>When working with relationships where we are working with one or more continuous variables, scatterplots are a good first choice for visualizing the data. Let’s take a look at the relationship between <code>sleep_total</code> and <code>bodywt</code> and add the <code>vore</code> status as another attribute.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">msleep <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> brainwt, <span class="dt">y =</span> sleep_total, <span class="dt">color =</span> vore)) <span class="op">+</span><span class="st"> </span><span class="co"># map x and y and add a color layer to the plot for `vore`</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co"># visualize as a scatterplot</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt; Warning: Removed 27 rows containing missing values (geom_point).</span></a></code></pre></div>
<p><img src="data-the-tidy-and-the-untidy_files/figure-html/msleep-1.png" width="700"></p>
</div>
<div id="untidy-data" class="section level2">
<h2 class="hasAnchor">
<a href="#untidy-data" class="anchor"></a>Untidy data</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># alternative untidy/ summary dataset: HairEyeColor</span></a></code></pre></div>
<p>Now let’s read some data from the Pew Research Center on religion and income.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">pew &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/rio/topics/import">import</a></span>(<span class="dt">file =</span> <span class="st">"http://stat405.had.co.nz/data/pew.txt"</span>, <span class="dt">setclass =</span> <span class="st">"tbl_df"</span>)</a></code></pre></div>
<p>Now let’s take a look at the data.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">glimpse</span>(pew)</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">#&gt; Observations: 18</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">#&gt; Variables: 11</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">#&gt; $ religion             &lt;chr&gt; "Agnostic", "Atheist", "Buddhist", "Catholi…</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">#&gt; $ `&lt;$10k`              &lt;int&gt; 27, 12, 27, 418, 15, 575, 1, 228, 20, 19, 2…</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">#&gt; $ `$10-20k`            &lt;int&gt; 34, 27, 21, 617, 14, 869, 9, 244, 27, 19, 4…</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">#&gt; $ `$20-30k`            &lt;int&gt; 60, 37, 30, 732, 15, 1064, 7, 236, 24, 25, …</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">#&gt; $ `$30-40k`            &lt;int&gt; 81, 52, 34, 670, 11, 982, 9, 238, 24, 25, 6…</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt; $ `$40-50k`            &lt;int&gt; 76, 35, 33, 638, 10, 881, 11, 197, 21, 30, …</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">#&gt; $ `$50-75k`            &lt;int&gt; 137, 70, 58, 1116, 35, 1486, 34, 223, 30, 9…</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt; $ `$75-100k`           &lt;int&gt; 122, 73, 62, 949, 21, 949, 47, 131, 15, 69,…</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#&gt; $ `$100-150k`          &lt;int&gt; 109, 59, 39, 792, 17, 723, 48, 81, 11, 87, …</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#&gt; $ `&gt;150k`              &lt;int&gt; 84, 74, 53, 633, 18, 414, 54, 78, 6, 151, 6…</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">#&gt; $ `Don't know/refused` &lt;int&gt; 96, 76, 54, 1489, 116, 1529, 37, 339, 37, 1…</span></a></code></pre></div>
<p>The dataset contains 18 observations and 11 variables. Let’s preview the tabular output.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">pew</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co">#&gt; # A tibble: 18 x 11</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt;    religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k`</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#&gt;    &lt;chr&gt;      &lt;int&gt;     &lt;int&gt;     &lt;int&gt;     &lt;int&gt;     &lt;int&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt;  1 Agnostic      27        34        60        81        76       137</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt;  2 Atheist       12        27        37        52        35        70</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt;  3 Buddhist      27        21        30        34        33        58</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt;  4 Catholic     418       617       732       670       638      1116</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt;  5 Don’t k…      15        14        15        11        10        35</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt;  6 Evangel…     575       869      1064       982       881      1486</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#&gt;  7 Hindu          1         9         7         9        11        34</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt;  8 Histori…     228       244       236       238       197       223</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt;  9 Jehovah…      20        27        24        24        21        30</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt; 10 Jewish        19        19        25        25        30        95</span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">#&gt; 11 Mainlin…     289       495       619       655       651      1107</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">#&gt; 12 Mormon        29        40        48        51        56       112</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co">#&gt; 13 Muslim         6         7         9        10         9        23</span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="co">#&gt; 14 Orthodox      13        17        23        32        32        47</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">#&gt; 15 Other C…       9         7        11        13        13        14</span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="co">#&gt; 16 Other F…      20        33        40        46        49        63</span></a>
<a class="sourceLine" id="cb13-21" title="21"><span class="co">#&gt; 17 Other W…       5         2         3         4         2         7</span></a>
<a class="sourceLine" id="cb13-22" title="22"><span class="co">#&gt; 18 Unaffil…     217       299       374       365       341       528</span></a>
<a class="sourceLine" id="cb13-23" title="23"><span class="co">#&gt; # … with 4 more variables: `$75-100k` &lt;int&gt;, `$100-150k` &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb13-24" title="24"><span class="co">#&gt; #   `&gt;150k` &lt;int&gt;, `Don't know/refused` &lt;int&gt;</span></a></code></pre></div>
<p>Considering our ‘tidy’ dataset definition, what is wrong with the following data frame?</p>
<p>How should this data ideally be structured for tidy-style analysis?</p>
<div id="tidying-data" class="section level3">
<h3 class="hasAnchor">
<a href="#tidying-data" class="anchor"></a>Tidying data</h3>
<p>The basic problem here is that our data is a summary of religion and various levels of income. So in essence, we really only have two variables, <code>religion</code> and <code>income</code>. The <code>gather()</code> function will allow us to effectively group the income levels into one column (<code>income</code>). We exclude the <code>religion</code> column.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">pew_tidy_sum &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span>pew <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="kw">gather</span>(income, count, <span class="op">-</span>religion)</a>
<a class="sourceLine" id="cb14-4" title="4">pew_tidy_sum</a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">#&gt; # A tibble: 180 x 3</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">#&gt;    religion                income count</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt;    &lt;chr&gt;                   &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">#&gt;  1 Agnostic                &lt;$10k     27</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">#&gt;  2 Atheist                 &lt;$10k     12</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">#&gt;  3 Buddhist                &lt;$10k     27</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">#&gt;  4 Catholic                &lt;$10k    418</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">#&gt;  5 Don’t know/refused      &lt;$10k     15</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">#&gt;  6 Evangelical Prot        &lt;$10k    575</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">#&gt;  7 Hindu                   &lt;$10k      1</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">#&gt;  8 Historically Black Prot &lt;$10k    228</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">#&gt;  9 Jehovah's Witness       &lt;$10k     20</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">#&gt; 10 Jewish                  &lt;$10k     19</span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">#&gt; # … with 170 more rows</span></a></code></pre></div>
<p>The real number of observations is still not transparent as we still have counts for each of the combinations of <code>religion</code> and <code>income</code>. To find out how many observations where made we can sum the counts. We can see how many true observation there are by summing the <code>count</code> column.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(pew_tidy_sum<span class="op">$</span>count)</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="co">#&gt; [1] 35556</span></a></code></pre></div>
<p>We can unsummarize this data into individual observations with <code>uncount()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">pew_tidy_ind &lt;-<span class="st"> </span><span class="kw">uncount</span>(pew_tidy_sum, count)</a>
<a class="sourceLine" id="cb16-2" title="2">pew_tidy_ind</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">#&gt; # A tibble: 35,556 x 2</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt;    religion income</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt;  1 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">#&gt;  2 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co">#&gt;  3 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co">#&gt;  4 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">#&gt;  5 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co">#&gt;  6 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="co">#&gt;  7 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co">#&gt;  8 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="co">#&gt;  9 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-15" title="15"><span class="co">#&gt; 10 Agnostic &lt;$10k </span></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co">#&gt; # … with 35,546 more rows</span></a></code></pre></div>
<p>We see that the dataset now has a row for each observation, as a tidy dataset should.</p>
<p>We can now summarize the data in any way we see fit.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">pew_tidy_ind <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span><span class="kw">count</span>(religion, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co">#&gt; # A tibble: 18 x 2</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">#&gt;    religion                    n</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">#&gt;    &lt;chr&gt;                   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="co">#&gt;  1 Evangelical Prot         9472</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">#&gt;  2 Catholic                 8054</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">#&gt;  3 Mainline Prot            7470</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="co">#&gt;  4 Unaffiliated             3707</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co">#&gt;  5 Historically Black Prot  1995</span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="co">#&gt;  6 Agnostic                  826</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="co">#&gt;  7 Jewish                    682</span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">#&gt;  8 Mormon                    581</span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="co">#&gt;  9 Atheist                   515</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co">#&gt; 10 Other Faiths              449</span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="co">#&gt; 11 Buddhist                  411</span></a>
<a class="sourceLine" id="cb17-17" title="17"><span class="co">#&gt; 12 Orthodox                  363</span></a>
<a class="sourceLine" id="cb17-18" title="18"><span class="co">#&gt; 13 Don’t know/refused        272</span></a>
<a class="sourceLine" id="cb17-19" title="19"><span class="co">#&gt; 14 Hindu                     257</span></a>
<a class="sourceLine" id="cb17-20" title="20"><span class="co">#&gt; 15 Jehovah's Witness         215</span></a>
<a class="sourceLine" id="cb17-21" title="21"><span class="co">#&gt; 16 Other Christian           129</span></a>
<a class="sourceLine" id="cb17-22" title="22"><span class="co">#&gt; 17 Muslim                    116</span></a>
<a class="sourceLine" id="cb17-23" title="23"><span class="co">#&gt; 18 Other World Religions      42</span></a>
<a class="sourceLine" id="cb17-24" title="24"></a>
<a class="sourceLine" id="cb17-25" title="25">pew_tidy_ind <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-26" title="26"><span class="st">  </span><span class="kw">count</span>(income, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-27" title="27"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb17-28" title="28"><span class="co">#&gt;    income                 n</span></a>
<a class="sourceLine" id="cb17-29" title="29"><span class="co">#&gt;    &lt;chr&gt;              &lt;int&gt;</span></a>
<a class="sourceLine" id="cb17-30" title="30"><span class="co">#&gt;  1 Don't know/refused  6121</span></a>
<a class="sourceLine" id="cb17-31" title="31"><span class="co">#&gt;  2 $50-75k             5185</span></a>
<a class="sourceLine" id="cb17-32" title="32"><span class="co">#&gt;  3 $75-100k            3990</span></a>
<a class="sourceLine" id="cb17-33" title="33"><span class="co">#&gt;  4 $20-30k             3357</span></a>
<a class="sourceLine" id="cb17-34" title="34"><span class="co">#&gt;  5 $30-40k             3302</span></a>
<a class="sourceLine" id="cb17-35" title="35"><span class="co">#&gt;  6 $100-150k           3197</span></a>
<a class="sourceLine" id="cb17-36" title="36"><span class="co">#&gt;  7 $40-50k             3085</span></a>
<a class="sourceLine" id="cb17-37" title="37"><span class="co">#&gt;  8 $10-20k             2781</span></a>
<a class="sourceLine" id="cb17-38" title="38"><span class="co">#&gt;  9 &gt;150k               2608</span></a>
<a class="sourceLine" id="cb17-39" title="39"><span class="co">#&gt; 10 &lt;$10k               1930</span></a></code></pre></div>
<p>Or we can visualize the relationships with plots.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">pew_tidy_ind <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> religion, <span class="dt">fill =</span> income)) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="data-the-tidy-and-the-untidy_files/figure-html/pew-plot-summary-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#goals">Goals</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#tidy-approach-to-data">Tidy approach to data</a></li>
      <li><a href="#tidy-data">Tidy data</a></li>
      <li><a href="#untidy-data">Untidy data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jerid Francom.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
